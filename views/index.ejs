<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Dashboard</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <%- include('partials/sidebar', { googleSheetsData }) %>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-header">
                <h1>Dashboard Overview</h1>
                <p>Manage all your business tools and data</p>
            </div>

            <!-- Overview Section -->
            <div class="content-section active" id="overview">
                <%- include('partials/overview-tab', { overviewData: overviewData || [], errorMessage }) %>
            </div>

            <!-- Google Sheets Section (refactored to partial) -->
            <div class="content-section" id="sheets">
                <%- include('partials/sheets-tab', { sheetsData: googleSheetsData || [], errorMessage }) %>
            </div>

            <!-- Web Tools Section (consolidated) -->
            <div class="content-section" id="apps">
                <%- include('partials/web-tools', { appsData: appsData || [], errorMessage }) %>
            </div>

            <!-- People Section -->
            <div class="content-section" id="people">
                <%- include('partials/people-section-tab', { peopleData: peopleData || [], errorMessage }) %>
            </div>

            <!-- SOPs Section -->
            <div class="content-section" id="sops">
                <%- include('partials/sos-tab', { sopData: sopData || [], errorMessage }) %>
            </div>

            <!-- Accounts & Entities Section -->
            <div class="content-section" id="accounts">
                <%- include('partials/accounts-entities-tab', { entities: entities || [],accounts: accounts || [], errorMessage }) %>
            </div>
        </main>
    </div>
    
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        
        // Person details data
        // Section info
        const sectionInfo = {
            overview: { title: 'Dashboard Overview', subtitle: 'Quick access to your most important tools' },
            sheets: { title: 'Google Sheets', subtitle: 'Manage all your spreadsheets and data' },
            apps: { title: 'Web Tools', subtitle: 'Access all your business applications' },
            people: { title: 'People Directory', subtitle: 'View team members and their roles' },
            sops: { title: 'Standard Operating Procedures', subtitle: 'Access company SOPs and documentation' },
            accounts: { title: 'Accounts & Entities', subtitle: 'Manage business entities and financial accounts' }
        };

        // Navigation
        function switchSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show target section
            document.getElementById(sectionId).classList.add('active');
            
            // Update nav
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
            
            // Update header
            const info = sectionInfo[sectionId];
            if (info) {
                document.querySelector('.content-header h1').textContent = info.title;
                document.querySelector('.content-header p').textContent = info.subtitle;
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = item.getAttribute('data-section');
                    if (section) switchSection(section);
                });
            });
        });
    </script>
</body>
</html>
